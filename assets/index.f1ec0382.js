import{d as e,o as t,c as r,a,t as n,b as l,u as s,e as o,r as i,f as c,g as u,h as d,w as m,i as p,F as v,j as f,k as g,l as h,m as y,n as x,p as b,q as w,s as k,v as C,x as S,y as E,z as O,A as _,B as T,C as P,D as B,S as N,E as z,G as M}from"./vendor.dff33a76.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L={class:"fixed opacity-80 text-center bg-purple-800 inset-0 z-50 flex flex-col items-center justify-center text-white"},j=a("h1",{class:"text-2xl mx-16 mb-4"}," Coin list fetch failed. Try reloading this page. ",-1),A={class:"text-base block"};var I=e({props:{message:{type:String,required:!0}},setup:e=>(l,s)=>(t(),r("div",L,[j,a("pre",A,n(e.message),1)]))});const V={"aria-hidden":"true"},$=["xlink:href"];var G=e({props:{prefix:{type:String,default:"icon"},name:{type:String,required:!0}},setup(e){const n=e,o=l((()=>`#${n.prefix}-${n.name}`));return(e,n)=>(t(),r("svg",V,[a("use",{"xlink:href":s(o),fill:"currentColor"},null,8,$)]))}});const U={},D={class:"fixed bg-purple-800 bg-opacity-75 inset-0 z-50 flex items-center justify-center"};U.render=function(e,a){const n=G;return t(),r("div",D,[o(n,{class:"animate-spin -ml-1 mr-3 h-15 w-15 text-white",name:"loader"})])};const q=["value"];var R=e({props:{modelValue:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const n=e=>{a("update:modelValue",e.target.value)};return(a,l)=>(t(),r("input",{class:"block relative shadow-md w-60 pr-10 p-2 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",value:e.modelValue,onInput:n},null,40,q))}});const F={},H={type:"button",class:"inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"};F.render=function(e,a){return t(),r("button",H,[i(e.$slots,"default")])};const W=c("global",{state:()=>({cryptoObject:{},BTCvalue:0}),actions:{async loadCryptoObject(){const e=await u.get("https://min-api.cryptocompare.com/data/all/coinlist?summary=true",{timeout:5e3});return this.cryptoObject=e.data.Data,this.cryptoObject}}}),J={class:"flex"},K={class:"max-w-xs"},Y=a("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),Q={class:"mt-1 relative rounded-md shadow-md"},X={key:0,class:"flex bg-white shadow-md p-1 rounded-md flex-wrap"},Z=["onClick"],ee={key:1,class:"text-sm text-red-600"},te=y(" Добавить ");var re=e({props:{checkTicker:{type:Function,default:()=>!0}},emits:["addTicker"],setup(e,{emit:i}){const c=e,{cryptoObject:u}=W(),y=d("");m(y,(e=>{y.value=e.toUpperCase()}));const x=l((()=>{return e=y.value,Object.keys(u).filter((t=>t.includes(e)||u[t].FullName.toUpperCase().includes(e))).slice(0,4);var e})),b=l((()=>c.checkTicker&&c.checkTicker(y.value)));function w(){0!==y.value.length&&(i("addTicker",y.value),y.value="")}return(e,l)=>{const i=R,c=G,u=F;return t(),r("section",null,[a("div",J,[a("div",K,[Y,a("div",Q,[o(i,{id:"wallet",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),type:"text",name:"wallet",placeholder:"Например DOGE",onKeydown:p(w,["enter"])},null,8,["modelValue","onKeydown"])]),y.value.length>0&&s(x)?(t(),r("div",X,[(t(!0),r(v,null,f(s(x),(e=>(t(),r("span",{key:e,class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer",onClick:t=>function(e){y.value=e,w()}(e)},n(e),9,Z)))),128))])):g("",!0),s(b)?(t(),r("div",ee," Такой тикер уже добавлен ")):g("",!0)])]),o(u,{class:"mt-4",onClick:w},{default:h((()=>[o(c,{class:"-ml-0.5 mr-2 h-6 w-6",name:"add"}),te])),_:1})])}}});const ae=a("label",null,"Поиск",-1);var ne=e({emits:["change"],setup(e,{emit:a}){const n=d("");return m(n,(e=>{n.value=e.toUpperCase(),a("change",n.value)})),(e,a)=>{const l=R;return t(),r(v,null,[ae,o(l,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),type:"text",class:"mt-2",placeholder:"например DOGE"},null,8,["modelValue"])],64)}}});const le={class:"space-x-4 my-4"},se=y(" Назад "),oe=y(" Вперед ");var ie=e({props:{showPrev:{type:Boolean,required:!0},showNext:{type:Boolean,required:!0}},emits:["prev","next"],setup:(e,{emit:a})=>(n,l)=>{const s=F;return t(),r("div",le,[e.showPrev?(t(),x(s,{key:0,onClick:l[0]||(l[0]=e=>a("prev"))},{default:h((()=>[se])),_:1})):g("",!0),e.showNext?(t(),x(s,{key:1,onClick:l[1]||(l[1]=e=>n.$emit("next"))},{default:h((()=>[oe])),_:1})):g("",!0)])}});function ce(e){return e?e<1?e.toPrecision(4):e.toFixed(2):"-"}const ue={class:"px-4 py-5 sm:p-6 text-center"},de={class:"text-sm font-medium text-gray-500 truncate"},me={class:"mt-1 text-3xl font-semibold text-gray-900"},pe=a("div",{class:"w-full border-t border-gray-200"},null,-1),ve=y(" Удалить ");var fe=e({props:{selected:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!1,default:!1},ticker:{type:null,required:!0}},emits:["delete"],setup(e){const i=e,c=l((()=>ce(i.ticker.price)));return(l,i)=>{const u=G;return t(),r("div",{class:w(["bg-white overflow-hidden shadow rounded-lg cursor-pointer transition-shadow ring-purple-800",{"ring-4":e.selected,"bg-red-100":e.error}])},[a("div",ue,[a("dt",de,n(e.ticker.name)+" - USD ",1),a("dd",me,n(s(c)),1)]),pe,a("button",{class:"w-full flex items-center justify-center font-medium bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-50 transition-all focus:outline-none",onClick:i[0]||(i[0]=b((t=>l.$emit("delete",e.ticker)),["stop"]))},[o(u,{class:"h-5 w-5",name:"delete"}),ve])],2)}}});function ge(e,t,r){return t===r?50:5+95*(e-t)/(r-t)}const he={class:"relative"},ye={class:"text-lg leading-6 font-medium text-gray-900 my-8"},xe={class:"absolute left-1/2 transform -translate-x-1/2 top-0 mt-1 text-3xl font-semibold text-gray-900"},be=["onPointerenter","onPointermove"];var we=e({props:{graph:{type:Array,default:()=>[]},graphbarWidth:{type:Number,default:25},heading:{type:String,default:"Graph"}},emits:["close"],setup(e,{emit:i}){const c=e,u=d(null),p=l((()=>{var e;return null==(e=O(y.value))?void 0:e.original})),h=d(null),{normalizedGraph:y}=function(e,t,r=35){const a=d(256);k(e)&&m(e,(t=>{t.length>256&&(e.value=t.slice(-256))}),{deep:!0});const n=l((()=>s(e).slice(-s(a)))),o=l((()=>Math.max(...n.value))),i=l((()=>Math.min(...n.value))),c=l((()=>n.value.map((e=>({normalized:ge(e,i.value,o.value),original:e}))))),u=C.exports.throttle((()=>{t.value&&k(a)&&(a.value=Math.ceil(t.value.clientWidth/s(r)))}),300);return S((()=>{u(),window.addEventListener("resize",u)})),E((()=>{window.removeEventListener("resize",u)})),{items:e,slicedItems:n,normalizedGraph:c}}(_(c,"graph"),h,_(c,"graphbarWidth"));return(l,c)=>{const d=G;return t(),r("section",he,[a("h3",ye,n(e.heading),1),a("button",{type:"button",class:"absolute top-0 right-0",onClick:c[0]||(c[0]=e=>i("close"))},[o(d,{name:"close",class:"w-7 h-7"})]),a("div",{ref:(e,t)=>{t.graphElement=e,h.value=e},class:"flex items-end border-gray-600 border-b border-l h-64"},[a("div",xe,[u.value||s(p)?(t(),r("span",{key:0,class:w({"text-yellow-600 transition-colors":u.value})},n(`$${s(ce)(u.value||s(p))}`),3)):g("",!0)]),(t(!0),r(v,null,f(s(y),(({normalized:n,original:l},o)=>(t(),r("div",{key:l,style:T({width:`${e.graphbarWidth}px`}),class:"h-full flex items-end group border border-transparent",onPointerenter:e=>u.value=l,onPointermove:e=>u.value=l,onPointerleave:c[1]||(c[1]=e=>u.value=null)},[a("div",{style:T({height:`${n}%`}),class:w(["bg-purple-800 group-hover:bg-yellow-600 transition-colors w-full",{"bg-yellow-600":o===s(y).length-1&&!u.value}])},null,6)],44,be)))),128))],512)])}}});function ke(e){const t=localStorage.getItem(s(e));return t?JSON.parse(t):null}const Ce=[{name:"BTC",price:0},{name:"ETH",price:0},{name:"DOGE",price:0}];function Se(){const e=d(Ce);!function(e,t){const r=ke(t);r&&(e.value=r),m(d(t),(()=>{const r=ke(t);r&&(e.value=r)})),m(e,(e=>{localStorage.setItem(s(t),JSON.stringify(e))}),{deep:!0})}(e,"cryptonomicon-list");const{filter:t,filteredItems:r}=function(e,t,r){const a=d(t);return{filteredItems:l((()=>s(e).filter(r))),filter:a}}(e,"",(e=>e.name.includes(t.value.toUpperCase()))),{page:a,paginatedItems:n,hasNextPage:o}=function(e,t,r=0){const a=d(r),n=l((()=>(a.value-r)*s(t))),o=l((()=>n.value+s(t))),i=l((()=>s(e).length>o.value)),c=l((()=>!i.value)),u=l((()=>a.value!==r)),p=l((()=>Math.ceil(s(e).length/s(t)))),v=l((()=>p.value-1)),f=l((()=>s(e).slice(n.value,o.value)));return m(f,(e=>{0==e.length&&a.value>r&&(a.value=v.value)})),{paginatedItems:f,page:a,startIndex:n,endIndex:o,isLastPage:c,isFirstPage:u,hasNextPage:i}}(r,6,1);function i(t){return e.value.find((e=>e.name===t))}return m(t,(()=>{a.value=1})),{tickers:e,filteredTickers:r,filter:t,page:a,hasNextPage:o,tickerExists:function(e){return Boolean(i(e))},paginatedTickers:n,getTicker:i}}let Ee;const Oe=new Map,_e=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=95bdf7e8c4ef1827e5f4b13d319b2ac9b409aa62feedc30f0f6553924d6ab246");function Te(e,t,r="USD"){const a=Oe.get(e)||[];Oe.set(e,[...a,t]),Be({action:"SubAdd",subs:[`5~CCCAGG~${e}~${r}`]})}function Pe(e,t){if(!t&&"BTC"!==e)return Be({action:"SubRemove",subs:[`5~CCCAGG~${e}~USD`]}),Be({action:"SubRemove",subs:[`5~CCCAGG~${e}~BTC`]}),void Oe.delete(e);const r=Oe.get(e)||[];Oe.set(e,r.filter((e=>e!==t)))}function Be(e){const t=_e.send.bind(_e,JSON.stringify(e));_e.readyState!==WebSocket.OPEN?_e.addEventListener("open",t):t()}_e.addEventListener("message",(e=>{const t=JSON.parse(e.data),{TYPE:r,MESSAGE:a,INFO:n}=t;if("500"===r&&"INVALID_SUB"===a){const e=t.PARAMETER.split("~")[2],r=function(e){return e.split("~")[3]}(t.PARAMETER);if("USD"===r){const t=Oe.get(e)||[];return Oe.delete(e),void t.forEach((t=>Te(e,(({name:e,error:a,price:n,message:l})=>{t({name:e,error:a,price:Ee*n,message:l,tsym:r})}),"BTC")))}const a=Oe.get(e);return a?void a.forEach((t=>t({name:e,error:!0,message:n,tsym:r,price:NaN}))):void Pe(e)}if("5"===r){const{FROMSYMBOL:e,PRICE:r,TOSYMBOL:a}=t;if(r){(Oe.get(e)||[]).forEach((n=>n({name:e,price:r,tsym:a,error:!1,message:t})))}}})),Te("BTC",(({price:e})=>Ee=e));const Ne={class:"container px-3"},ze=a("hr",{class:"w-full border-t border-gray-400 my-8"},null,-1),Me=a("hr",{class:"w-full border-t border-gray-400 my-8"},null,-1),Le={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3 items-center"},je=a("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1);var Ae=e({async setup(e){let n,l;const i=W();[n,l]=P((()=>i.loadCryptoObject())),n=await n,l();const{cryptoObject:c}=i,{tickers:u,filter:p,paginatedTickers:h,page:y,hasNextPage:b,tickerExists:w,getTicker:k}=Se(),C=d(null),S=d({});var E;m(S,(e=>{Object.keys(e).forEach((e=>{const{length:t}=S.value[e];t>128&&S.value[e].splice(0,t-128)}))}),{deep:!0}),E={filter:p,page:y},Object.entries(E).forEach((([e,t])=>{m(t,(t=>{const r=new URLSearchParams(window.location.search);r.set(s(e),t.toString()),window.history.pushState(null,window.document.title,`${window.location.pathname}?${r.toString()}`)}),{immediate:!0})}));let{filter:O,page:_}=Object.fromEntries(new URLSearchParams(window.location.search).entries());function T({name:e,price:t,error:r,message:a}){const n=k(e);if(n){if(r)return console.log({error:r,message:a}),void(n.error=a);n.price=t,S.value[n.name]||(S.value[n.name]=[]),S.value[n.name].push(t)}}function B(e){if(!function(e){return Object.keys(c).includes(e)}(e)||k(e))return;const t={name:e,price:0};u.value=[...u.value,t],p.value="",Te(t.name,T)}function N(e){var t;u.value=u.value.filter((t=>t.name!==e.name)),e.name===(null==(t=C.value)?void 0:t.name)&&(C.value=null),S.value[e.name]&&delete S.value[e.name],Pe(e.name,T)}function z(e){C.value=e}function M(e){return p.value=e}return _&&(y.value=+_),O&&(p.value=O),u.value.forEach((e=>{Te(e.name,T)})),u.value.length>0&&z(u.value[0]),(e,n)=>{const l=re,i=ne,c=ie,d=fe,m=we;return t(),r("div",Ne,[o(l,{"check-ticker":s(w),onAddTicker:B},null,8,["check-ticker"]),s(u).length?(t(),r(v,{key:0},[ze,o(i,{onChange:M}),o(c,{class:"space-x-4 my-4","show-prev":s(y)>1,"show-next":s(b),onPrev:n[0]||(n[0]=e=>y.value-=1),onNext:n[1]||(n[1]=e=>y.value+=1)},null,8,["show-prev","show-next"]),Me,a("dl",Le,[(t(!0),r(v,null,f(s(h),(e=>{var r;return t(),x(d,{key:e.name,ticker:e,selected:(null==(r=C.value)?void 0:r.name)===e.name,error:Boolean(e.error),onClick:t=>z(e),onDelete:N},null,8,["ticker","selected","error","onClick"])})),128))]),je],64)):g("",!0),C.value?(t(),x(m,{key:1,graph:S.value[C.value.name],heading:`${C.value.name} - USD`,onCloseClick:n[2]||(n[2]=e=>C.value=null)},null,8,["graph","heading"])):g("",!0)])}}});const Ie={key:0},Ve={class:"bg-gray-100"},$e={class:"container px-3 mx-auto flex flex-col items-center py-4"},Ge={class:"bg-gray-100"},Ue={class:"container px-3 mx-auto flex flex-col items-center py-4"};var De=e({setup(e){const n=d(null);return B((e=>(n.value=e,!0))),(e,l)=>{const s=I,i=U;return t(),r(v,null,[n.value?(t(),r("div",Ie,[a("div",Ve,[a("div",$e,[o(s,{message:n.value.toString()},null,8,["message"])])])])):g("",!0),(t(),x(N,null,{default:h((()=>[a("div",Ge,[a("div",Ue,[o(Ae)])])])),fallback:h((()=>[o(i)])),_:1}))],64)}}});if("undefined"!=typeof window){let e=function(){let e=document.body,t=document.getElementById("__svg__icons__dom__1632226928545__");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__1632226928545__"),t.innerHTML='<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff" id="icon-add"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.76 511.76" id="icon-close"><path d="M436.896 74.869c-99.84-99.819-262.208-99.819-362.048 0-99.797 99.819-99.797 262.229 0 362.048 49.92 49.899 115.477 74.837 181.035 74.837s131.093-24.939 181.013-74.837c99.819-99.818 99.819-262.229 0-362.048zm-75.435 256.448c8.341 8.341 8.341 21.824 0 30.165a21.275 21.275 0 0 1-15.083 6.251 21.277 21.277 0 0 1-15.083-6.251l-75.413-75.435-75.392 75.413a21.348 21.348 0 0 1-15.083 6.251 21.277 21.277 0 0 1-15.083-6.251c-8.341-8.341-8.341-21.845 0-30.165l75.392-75.413-75.413-75.413c-8.341-8.341-8.341-21.845 0-30.165 8.32-8.341 21.824-8.341 30.165 0l75.413 75.413 75.413-75.413c8.341-8.341 21.824-8.341 30.165 0 8.341 8.32 8.341 21.824 0 30.165l-75.413 75.413 75.415 75.435z" fill="#718096" data-original="#000000" /></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#718096" aria-hidden="true" id="icon-delete"><path fill-rule="evenodd" d="M9 2a1 1 0 0 0-.894.553L7.382 4H4a1 1 0 0 0 0 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a1 1 0 1 0 0-2h-3.382l-.724-1.447A1 1 0 0 0 11 2H9zM7 8a1 1 0 0 1 2 0v6a1 1 0 1 1-2 0V8zm5-1a1 1 0 0 0-1 1v6a1 1 0 1 0 2 0V8a1 1 0 0 0-1-1z" clip-rule="evenodd" /></symbol><symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="icon-loader"><circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.2)" stroke-width="4" /><path fill="currentColor" d="M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" /></symbol>',e.insertBefore(t,e.firstChild)};"interactive"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}z(De).use(M()).mount("#app");
